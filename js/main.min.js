"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),FrondevoGetCatalogItems=function(){function e(t){_classCallCheck(this,e),this.urlGetMore=t}return _createClass(e,[{key:"checkIsAnyProductsCanBeLoaded",value:function(e){return"none"!=e}},{key:"getItems",value:function(e){var t=$.Deferred();return $.ajax({type:"get",dataType:"json",url:this.urlGetMore,data:e}).done(function(e){t.resolve(e)}).fail(function(e){t.reject(e.statusText)}),t.promise()}}]),e}();!function(e){e.fn.customSelect=function(t){return this.each(function(){var t=e(this);t.attr("disabled")?t.wrap("<div class='custom-select-wrap custom-select-wrap_disabled'></div>"):t.wrap("<div class='custom-select-wrap'></div>"),t.before("<div class='custom-select-text'></div>");var n=t.parent(".custom-select-wrap"),o=n.find(".custom-select-text");o.text(t.find("option:selected").text()),e(this).change(function(){o.text(t.find("option:selected").text())}),e(this).focus(function(){n.addClass("focus")}),e(this).blur(function(){n.removeClass("focus")})}),this}}($);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),FrondevoTopNav=function(){function e(t){_classCallCheck(this,e),this.topNav=t,this.topNavUl=this.topNav.find("ul").eq(0),this.arrTopNavSubMenu=this.topNavUl.find(".h-menu-dd__layout-sub-menu"),this.elForShowMobMenu=$("#h-menu-dd__show-menu"),this.classForAnimationSubMenu="h-menu-dd__layout-sub-menu_animation",this.globalNoScrollClass="noscroll",this.mobileSubMenuOpenClass="h-menu__item-open",this.firstLevelMenuItemClass="h-menu-dd__item",this.firstLevelLinkOnlyClass="h-menu__item-link",this.arrTopNavSubMenu.addClass(this.classForAnimationSubMenu),this.arrItemMenuFirstLevel=this.topNav.find(".h-menu-dd__item"),this._eventHandlersInit()}return _createClass(e,[{key:"_firedIfShowDropDownMenu",value:function(){var e=$.Event("topMenuDropDown:show");return this.topNav.trigger(e),this}},{key:"_firedIfHideDropDownMenu",value:function(){this._addAnimationForSubmenu();var e=$.Event("topMenuDropDown:hide");return this.topNav.trigger(e),this}},{key:"_removeAnimationForSubmenu",value:function(){this.arrTopNavSubMenu.removeClass(this.classForAnimationSubMenu)}},{key:"_addAnimationForSubmenu",value:function(){this.arrTopNavSubMenu.addClass(this.classForAnimationSubMenu)}},{key:"_toogleSubMenuForMobile",value:function(e){if(!(window.innerWidth>1e3)){e.preventDefault();var t=$(e.target).parent();t.hasClass(this.firstLevelLinkOnlyClass)&&(document.location.href=$(e.target).attr("href")),!t.hasClass(this.mobileSubMenuOpenClass)&&t.hasClass(this.firstLevelMenuItemClass)?t.addClass(this.mobileSubMenuOpenClass):t.hasClass(this.firstLevelMenuItemClass)&&t.removeClass(this.mobileSubMenuOpenClass)}}},{key:"_toggleGlobalScroll",value:function(){console.log(1),this.elForShowMobMenu.is(":checked")?$("html").addClass(this.globalNoScrollClass):$("html").removeClass(this.globalNoScrollClass)}},{key:"_eventHandlersInit",value:function(){var e=this;this.topNavUl.on("mouseenter",function(){return e._firedIfShowDropDownMenu()}),this.topNavUl.on("mouseleave",function(){return e._firedIfHideDropDownMenu()}),this.arrTopNavSubMenu.on("transitionend",function(){return e._removeAnimationForSubmenu()}),this.arrItemMenuFirstLevel.on("click",function(){return e._toogleSubMenuForMobile(event)}),this.elForShowMobMenu.on("change",function(){return e._toggleGlobalScroll()})}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),FrondevoScrollToTop=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body",n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:800;_classCallCheck(this,e),this.urlToHTMLTemplate="js-views/ui/_scroll-to-top.html",this.elWhereAppendScrollButton=t,this.topOffsetWhenShowButton=o,this.scrollSpeed=r,this._getHTMLTemplateButtonScrollToTop(this.urlToHTMLTemplate).then(function(e){n.buttonScrollToTop=n._createButtonScrollToTop(e),n._eventHandlersInit()},function(e){console.error("Не удалось загрузить шаблон!",e)})}return _createClass(e,[{key:"showButton",value:function(){this.buttonScrollToTop.fadeIn()}},{key:"hideButton",value:function(){this.buttonScrollToTop.fadeOut()}},{key:"scrollToTop",value:function(){$("html, body").animate({scrollTop:0},this.scrollSpeed)}},{key:"_getHTMLTemplateButtonScrollToTop",value:function(e){var t=$.Deferred();return $.ajax({type:"get",dataType:"html",url:e}).done(function(e){t.resolve(e)}).fail(function(e){t.reject(e.statusText)}),t.promise()}},{key:"_createButtonScrollToTop",value:function(e){return $(e).appendTo(this.elWhereAppendScrollButton)}},{key:"_checkOffsetFromTop",value:function(){var e=$(window).scrollTop();e>this.topOffsetWhenShowButton?this.showButton():this.hideButton()}},{key:"_eventHandlersInit",value:function(){var e=this;window.addEventListener("scroll",function(){return e._checkOffsetFromTop()}),this.buttonScrollToTop.on("click",function(){return e.scrollToTop()})}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),FrondevoGlobalUI=function(){function e(){_classCallCheck(this,e),this.topNav=$("nav.h-menu-dd").eq(0),this.selectorButtonShowDropDownMenu=$(".menu__drop-down-menu-button"),this.selectorDropDownMenu=$(".menu__drop-down-menu"),this.classForShowShowDropDownMenu="menu__drop-down-menu-show",this.classForOpenButtonShowDropDownMenu="menu__drop-down-menu-button-open",this.selectorBody=$("body"),this._eventHandlersInit()}return _createClass(e,[{key:"_initModules",value:function(){new FrondevoTopNav(this.topNav)}},{key:"_showDropDownMenu",value:function(){this.selectorDropDownMenu.toggleClass(this.classForShowShowDropDownMenu),this.selectorButtonShowDropDownMenu.toggleClass(this.classForOpenButtonShowDropDownMenu)}},{key:"_hideDropDownMenu",value:function(e){0==$(e).closest(".menu__drop-down-menu-button").length&&(this.selectorDropDownMenu.removeClass(this.classForShowShowDropDownMenu),this.selectorButtonShowDropDownMenu.removeClass(this.classForOpenButtonShowDropDownMenu))}},{key:"_hideMobMenu",value:function(e){$(e).hasClass("h-menu-dd__mob-btn")||$(".h-menu-dd__mob-btn-check").is(":checked")&&0==$(e).closest(".h-menu-dd__list").length&&$(".h-menu-dd__mob-btn").click()}},{key:"_clickOnTheCheckboxInMenu",value:function(){$(".h-menu-dd__mob-btn").click()}},{key:"_eventHandlersInit",value:function(){var e=this;$(document).on("ready",function(){return e._initModules()}),this.selectorButtonShowDropDownMenu.on("click",function(){return e._showDropDownMenu()}),this.selectorBody.on("click",function(t){return e._hideDropDownMenu(t.target)}),this.selectorBody.on("touchstart",function(t){return e._hideDropDownMenu(t.target)}),$(".h-menu-dd__item-button-close-menu").on("click",function(t){return e._clickOnTheCheckboxInMenu(t.target)}),this.selectorBody.on("touchstart",function(t){return e._hideMobMenu(t.target)})}}]),e}(),globalUI=new FrondevoGlobalUI,FrondevoSendAJAX=function(){function e(t){_classCallCheck(this,e),this.serverScriptUrl=t.serverScriptUrl,this.sendMethod=t.sendMethod||"get",this.dataType=t.dataType||"json"}return _createClass(e,[{key:"sendData",value:function(e){var t=$.Deferred();return $.ajax({type:this.sendMethod,dataType:this.dataType,url:this.serverScriptUrl,data:e}).done(function(e){t.resolve(e)}).fail(function(e){t.reject(e.statusText)}),t.promise()}}]),e}(),FrondevoAJAXSubmitForm=function(){function e(t){_classCallCheck(this,e),this.formSelector=t.formSelector,this.formRowSelector=t.selectorFormRow,this.invalidRowClassName=t.invalidRowClassName,this.validRowClassName=t.validRowClassName,this.errorMessageSelector=t.errorMessageSelector,this.errorWrapSelector=t.errorWrapSelector,this.form=$(this.formSelector),this.formType=this.form.attr("method")||"get",this.scriptUrl=this.form.attr("action"),this.dataType=t.ajaxDataType||"json",this.sendingData="",this.serverAnswer="",this.typeAJAXSucces=t.typeAJAXSucces||"showMessage",this.typeAJAXMessage=t.typeAJAXMessage||"popup",this._eventHandlersInit()}return _createClass(e,[{key:"_sendData",value:function(){this.ajaxSendData=new FrondevoSendAJAX({serverScriptUrl:this.scriptUrl,sendMethod:this.formType,dataType:this.dataType})}},{key:"_serverValidateForm",value:function(e){var t=this;e.preventDefault(),this.sendingData=this.form.serialize(),this._sendData(),this.ajaxSendData.sendData(this.sendingData).then(function(e){"ERROR"==e.status.toUpperCase()?t._showError(e.invalidInputName,e.message):e.goToUrl?t._goToUrlAfterSuccessSend(e.goToUrl):(t.serverAnswer=e.message,t._firedSendSuccess())},function(e){console.error("Не удалось отправить данные формы!",e)})}},{key:"_showError",value:function(e,t){var n=this.form.find('[name="'+e+'"]'),o=n.parents(this.formRowSelector).eq(0),r=o.find(this.errorWrapSelector).eq(0),s=r.find(this.errorMessageSelector).eq(0);s.text(t),o.removeClass(this.validRowClassName).addClass(this.invalidRowClassName),r.show()}},{key:"_goToUrlAfterSuccessSend",value:function(e){window.location=e}},{key:"_firedSendSuccess",value:function(){var e=$.Event("ajax-submit:success");this.form.trigger(e)}},{key:"getJSONServerAsnswer",value:function(){return this.serverAnswer}},{key:"_eventHandlersInit",value:function(){var e=this;$(this.formSelector).on("submit",function(t){return e._serverValidateForm(t.currentTarget)})}}]),e}();